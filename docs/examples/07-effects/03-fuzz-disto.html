
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>03-fuzz-disto.py - Hand-written asymmetrical tranfert function. — Pyo 1.0.4 documentation</title>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/nature.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/sphinx-codeautolink.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/autoclasstoc.css" rel="stylesheet" type="text/css"/>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/doctools.js"></script>
<link href="../../_static/E-PyoIcon.ico" rel="shortcut icon"/>
<link href="../../about.html" rel="author" title="About these documents"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="04-ping-pong-delay.html" rel="next" title="04-ping-pong-delay.py - Stereo ping-pong delay."/>
<link href="02-schroeder-reverb.html" rel="prev" title="02-schroeder-reverb.py - Simple reverberator based on Schroeder’s algorithms."/>
</head><body>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a accesskey="N" href="04-ping-pong-delay.html" title="04-ping-pong-delay.py - Stereo ping-pong delay.">next</a> |</li>
<li class="right">
<a accesskey="P" href="02-schroeder-reverb.html" title="02-schroeder-reverb.py - Simple reverberator based on Schroeder’s algorithms.">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../../index.html">Pyo 1.0.4 documentation</a> »</li>
<li class="nav-item nav-item-1"><a accesskey="U" href="index.html">07-effects</a> »</li>
<li class="nav-item nav-item-this"><a href="">03-fuzz-disto.py - Hand-written asymmetrical tranfert function.</a></li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body" role="main">
<section id="fuzz-disto-py-hand-written-asymmetrical-tranfert-function">
<h1>03-fuzz-disto.py - Hand-written asymmetrical tranfert function.<a class="headerlink" href="#fuzz-disto-py-hand-written-asymmetrical-tranfert-function" title="Permalink to this headline">¶</a></h1>
<p>This example implements a fuzz distortion. Bandpass filtered signal is
eavily boosted, then feeded to an asymmetrical transfert function, and
finally lowpass filtered to smooth out the sound. Balance between the
dry and the distorted sound is applied before sending the signal to the
outputs.</p>
<p>Builtin objects to distort an audio signal:</p>
<blockquote>
<div><p>Disto, Clip, Mirror, Wrap</p>
</div></blockquote>
<p>Degrade object applies some kind of distortion to a signal by changing
its sampling rate and bit depth.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <a class="sphinx-codeautolink-a" href="../../api/alphabetical.html#module-pyo" title="pyo"><span class="nn">pyo</span></a> <span class="kn">import</span> <span class="o">*</span>

<span class="n">s</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/server.html#pyo.Server" title="pyo.lib.server.Server"><span class="n">Server</span></a><span class="p">(</span><span class="n">duplex</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">boot</span><span class="p">()</span>

<span class="c1"># The audio source (try with your own sounds).</span>
<span class="n">SOURCE</span> <span class="o">=</span> <span class="s2">"../snds/flute.aif"</span>

<span class="c1"># Distortion parameters</span>
<span class="n">BP_CENTER_FREQ</span> <span class="o">=</span> <span class="mi">400</span>  <span class="c1"># Bandpass filter center frequency.</span>
<span class="n">BP_Q</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># Bandpass Q (center_freq / Q = bandwidth).</span>
<span class="n">BOOST</span> <span class="o">=</span> <span class="mi">25</span>  <span class="c1"># Pre-boost (linear gain).</span>
<span class="n">LP_CUTOFF_FREQ</span> <span class="o">=</span> <span class="mi">3000</span>  <span class="c1"># Lowpass filter cutoff frequency.</span>
<span class="n">BALANCE</span> <span class="o">=</span> <span class="mf">0.7</span>  <span class="c1"># Balance dry - wet.</span>

<span class="n">src</span> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/players.html#pyo.SfPlayer" title="pyo.lib.players.SfPlayer"><span class="n">SfPlayer</span></a><span class="p">(</span><span class="n">SOURCE</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">mix</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># The transfert function is build in two phases.</span>

<span class="c1"># 1. Transfert function for signal lower than 0.</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/tables.html#pyo.ExpTable" title="pyo.lib.tables.ExpTable"><span class="n">table</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/tables.html#pyo.ExpTable" title="pyo.lib.tables.ExpTable"><span class="n">ExpTable</span></a><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">),</span> <span class="p">(</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">8192</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">exp</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># 2. Transfert function for signal higher than 0.</span>
<span class="c1"># First, create an exponential function from 1 (at the beginning of the table)</span>
<span class="c1"># to 0 (in the middle of the table).</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/tables.html#pyo.ExpTable" title="pyo.lib.tables.ExpTable"><span class="n">high_table</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/tables.html#pyo.ExpTable" title="pyo.lib.tables.ExpTable"><span class="n">ExpTable</span></a><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4096</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4598</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">8192</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">exp</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Then, reverse the table’s data in time, to put the shape in the second</span>
<span class="c1"># part of the table.</span>
<span class="n">high_table</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

<span class="c1"># Finally, add the second table to the first, point by point.</span>
<span class="n">table</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><a class="sphinx-codeautolink-a" href="../../api/classes/tables.html#pyo.ExpTable" title="pyo.lib.tables.ExpTable"><span class="n">high_table</span></a><span class="p">)</span>

<span class="c1"># Show the transfert function.</span>
<span class="n">table</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Transfert function"</span><span class="p">)</span>

<span class="c1"># Bandpass filter and boost gain applied on input signal.</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/filters.html#pyo.ButBP" title="pyo.lib.filters.ButBP"><span class="n">bp</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/filters.html#pyo.ButBP" title="pyo.lib.filters.ButBP"><span class="n">ButBP</span></a><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">BP_CENTER_FREQ</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">BP_Q</span><span class="p">)</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/controls.html#pyo.Sig" title="pyo.lib._core.Sig"><span class="n">boost</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/controls.html#pyo.Sig" title="pyo.lib._core.Sig"><span class="n">Sig</span></a><span class="p">(</span><a class="sphinx-codeautolink-a" href="../../api/classes/filters.html#pyo.ButBP" title="pyo.lib.filters.ButBP"><span class="n">bp</span></a><span class="p">,</span> <span class="n">mul</span><span class="o">=</span><span class="n">BOOST</span><span class="p">)</span>

<span class="c1"># Apply the transfert function.</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/tableprocess.html#pyo.Lookup" title="pyo.lib.tableprocess.Lookup"><span class="n">sig</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/tableprocess.html#pyo.Lookup" title="pyo.lib.tableprocess.Lookup"><span class="n">Lookup</span></a><span class="p">(</span><a class="sphinx-codeautolink-a" href="../../api/classes/tables.html#pyo.ExpTable" title="pyo.lib.tables.ExpTable"><span class="n">table</span></a><span class="p">,</span> <a class="sphinx-codeautolink-a" href="../../api/classes/controls.html#pyo.Sig" title="pyo.lib._core.Sig"><span class="n">boost</span></a><span class="p">)</span>

<span class="c1"># Lowpass filter on the distorted signal.</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/filters.html#pyo.ButLP" title="pyo.lib.filters.ButLP"><span class="n">lp</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/filters.html#pyo.ButLP" title="pyo.lib.filters.ButLP"><span class="n">ButLP</span></a><span class="p">(</span><a class="sphinx-codeautolink-a" href="../../api/classes/tableprocess.html#pyo.Lookup" title="pyo.lib.tableprocess.Lookup"><span class="n">sig</span></a><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">LP_CUTOFF_FREQ</span><span class="p">,</span> <span class="n">mul</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Balance between dry and wet signals.</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/utils.html#pyo.Interp" title="pyo.lib.utils.Interp"><span class="n">mixed</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/utils.html#pyo.Interp" title="pyo.lib.utils.Interp"><span class="n">Interp</span></a><span class="p">(</span><span class="n">src</span><span class="p">,</span> <a class="sphinx-codeautolink-a" href="../../api/classes/filters.html#pyo.ButLP" title="pyo.lib.filters.ButLP"><span class="n">lp</span></a><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="n">BALANCE</span><span class="p">)</span>

<span class="c1"># Send the signal to the outputs.</span>
<span class="n">out</span> <span class="o">=</span> <span class="p">(</span><a class="sphinx-codeautolink-a" href="../../api/classes/utils.html#pyo.Interp" title="pyo.lib.utils.Interp"><span class="n">mixed</span></a> <span class="o">*</span> <span class="mf">0.3</span><span class="p">)</span><span class="o">.</span><span class="n">out</span><span class="p">()</span>

<span class="c1"># Show the resulting waveform.</span>
<a class="sphinx-codeautolink-a" href="../../api/classes/analysis.html#pyo.Scope" title="pyo.lib.analysis.Scope"><span class="n">sc</span></a> <span class="o">=</span> <a class="sphinx-codeautolink-a" href="../../api/classes/analysis.html#pyo.Scope" title="pyo.lib.analysis.Scope"><span class="n">Scope</span></a><span class="p">(</span><a class="sphinx-codeautolink-a" href="../../api/classes/utils.html#pyo.Interp" title="pyo.lib.utils.Interp"><span class="n">mixed</span></a><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">gui</span><span class="p">(</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
</section>
<div class="clearer"></div>
</div>
</div>
</div>
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div class="sphinxsidebarwrapper">
<h4>Previous topic</h4>
<p class="topless"><a href="02-schroeder-reverb.html" title="previous chapter">02-schroeder-reverb.py - Simple reverberator based on Schroeder’s algorithms.</a></p>
<h4>Next topic</h4>
<p class="topless"><a href="04-ping-pong-delay.html" title="next chapter">04-ping-pong-delay.py - Stereo ping-pong delay.</a></p>
<div id="searchbox" role="search" style="display: none">
<h3 id="searchlabel">Quick search</h3>
<div class="searchformwrapper">
<form action="../../search.html" class="search" method="get">
<input aria-labelledby="searchlabel" autocapitalize="off" autocomplete="off" autocorrect="off" name="q" spellcheck="false" type="text"/>
<input type="submit" value="Go"/>
</form>
</div>
</div>
<script>$('#searchbox').show(0);</script>
</div>
</div>
<div class="clearer"></div>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="04-ping-pong-delay.html" title="04-ping-pong-delay.py - Stereo ping-pong delay.">next</a> |</li>
<li class="right">
<a href="02-schroeder-reverb.html" title="02-schroeder-reverb.py - Simple reverberator based on Schroeder’s algorithms.">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../../index.html">Pyo 1.0.4 documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="index.html">07-effects</a> »</li>
<li class="nav-item nav-item-this"><a href="">03-fuzz-disto.py - Hand-written asymmetrical tranfert function.</a></li>
</ul>
</div>
<div class="footer" role="contentinfo">
        © Copyright 2021, Olivier Bélanger.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
</body>
</html>